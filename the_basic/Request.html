<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Request |  Ruby on Rails Documentattion </title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="RoR Documentation for Beginners">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.7adc5413.js" as="script"><link rel="preload" href="/assets/js/2.72a95a92.js" as="script"><link rel="preload" href="/assets/js/39.3159a702.js" as="script"><link rel="prefetch" href="/assets/js/10.a520d8be.js"><link rel="prefetch" href="/assets/js/11.f290d03c.js"><link rel="prefetch" href="/assets/js/12.52c96c43.js"><link rel="prefetch" href="/assets/js/13.2df3af10.js"><link rel="prefetch" href="/assets/js/14.840b181d.js"><link rel="prefetch" href="/assets/js/15.71342207.js"><link rel="prefetch" href="/assets/js/16.9d4ff7c3.js"><link rel="prefetch" href="/assets/js/17.842c0f28.js"><link rel="prefetch" href="/assets/js/18.93bc7927.js"><link rel="prefetch" href="/assets/js/19.5935f0d0.js"><link rel="prefetch" href="/assets/js/20.cdf58d7d.js"><link rel="prefetch" href="/assets/js/21.3166d2bf.js"><link rel="prefetch" href="/assets/js/22.b1a0c7ae.js"><link rel="prefetch" href="/assets/js/23.df366c28.js"><link rel="prefetch" href="/assets/js/24.fc6d5a86.js"><link rel="prefetch" href="/assets/js/25.2115eb5e.js"><link rel="prefetch" href="/assets/js/26.a5569d65.js"><link rel="prefetch" href="/assets/js/27.214f9614.js"><link rel="prefetch" href="/assets/js/28.6263065f.js"><link rel="prefetch" href="/assets/js/29.0f98370e.js"><link rel="prefetch" href="/assets/js/3.447679a1.js"><link rel="prefetch" href="/assets/js/30.1182db89.js"><link rel="prefetch" href="/assets/js/31.38016aaf.js"><link rel="prefetch" href="/assets/js/32.626ffe2b.js"><link rel="prefetch" href="/assets/js/33.039db41a.js"><link rel="prefetch" href="/assets/js/34.76b65e88.js"><link rel="prefetch" href="/assets/js/35.1f504bd2.js"><link rel="prefetch" href="/assets/js/36.2089506c.js"><link rel="prefetch" href="/assets/js/37.54d694f8.js"><link rel="prefetch" href="/assets/js/38.8a179bd0.js"><link rel="prefetch" href="/assets/js/4.fb941f04.js"><link rel="prefetch" href="/assets/js/40.3697d274.js"><link rel="prefetch" href="/assets/js/41.b554a771.js"><link rel="prefetch" href="/assets/js/42.45c82fe7.js"><link rel="prefetch" href="/assets/js/43.b54c5bed.js"><link rel="prefetch" href="/assets/js/44.fbcc36d7.js"><link rel="prefetch" href="/assets/js/5.384b96a2.js"><link rel="prefetch" href="/assets/js/6.d92e70ec.js"><link rel="prefetch" href="/assets/js/7.189f016f.js"><link rel="prefetch" href="/assets/js/8.f4a80106.js"><link rel="prefetch" href="/assets/js/9.1176b470.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> Ruby on Rails Documentattion </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Ruby on rails</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Basic</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/the_basic/" aria-current="page" class="sidebar-link">The Basic</a></li><li><a href="/the_basic/Routing.html" class="sidebar-link">Routing</a></li><li><a href="/the_basic/CSRF Protection.html" class="sidebar-link">CSRF Protection</a></li><li><a href="/the_basic/Controller.html" class="sidebar-link">Controller</a></li><li><a href="/the_basic/Request.html" aria-current="page" class="active sidebar-link">Request</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/the_basic/Response.html" class="sidebar-link">Response</a></li><li><a href="/the_basic/ERB Template.html" class="sidebar-link">ERB Template</a></li><li><a href="/the_basic/Asset Bundling Webpacker.html" class="sidebar-link">Asset Bundling (Webpacker)</a></li><li><a href="/the_basic/URL Generation.html" class="sidebar-link">URL Generation</a></li><li><a href="/the_basic/Sessions.html" class="sidebar-link">Sessions</a></li><li><a href="/the_basic/Validations.html" class="sidebar-link">Validations</a></li><li><a href="/the_basic/Logging.html" class="sidebar-link">Logging</a></li><li><a href="/the_basic/Error Handling.html" class="sidebar-link">Error Handling</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Digging Deeper</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Packages</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="request"><a href="#request" class="header-anchor">#</a> Request</h1> <ul><li><p>Introduction</p> <p>Rails <strong>ActionDispatch::Request</strong> class provides an object-oriented way to interact with the current HTTP request being handled by your application and <strong>ActionController::StrongParameters</strong> provide  access to data sent in by the user or other parameters in your controller actions</p></li> <li><p>Interacting With The Request</p> <ul><li><p>Accessing The Request</p> <p>You can  obtain an instance of the current HTTP request in your controller via request.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token variable">@full_path</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>original_fullpath
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>| --- | --- |</p></li></ul></li> <li><p>Input</p> <p>You will probably want to access data sent in by the user or other parameters in your controller actions. There are two kinds of parameters possible in a web application. The first are parameters that are sent as part of the URL, called query string parameters. The query string is everything after &quot;?&quot; in the URL. The second type of parameter is usually referred to as POST data. This information usually comes from an HTML form which has been filled in by the user. It's called POST data because it can only be sent as part of an HTTP POST request. Rails does not make any distinction between query string parameters and POST parameters, and both are available in the <code>[params](https://api.rubyonrails.org/v7.0.4/classes/ActionController/StrongParameters.html#method-i-params)</code>hash in your controller:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">ClientsController</span> <span class="token operator">&lt;</span> ApplicationController
  <span class="token comment"># This action uses query string parameters because it gets run</span>
  <span class="token comment"># by an HTTP GET request, but this does not make any difference</span>
  <span class="token comment"># to how the parameters are accessed. The URL for</span>
  <span class="token comment"># this action would look like this to list activated</span>
  <span class="token comment"># clients: /clients?status=activated</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span>
    <span class="token keyword">if</span> params<span class="token punctuation">[</span><span class="token symbol">:status</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">&quot;activated&quot;</span></span>
      <span class="token variable">@clients</span> <span class="token operator">=</span> Client<span class="token punctuation">.</span>activated
    <span class="token keyword">else</span>
      <span class="token variable">@clients</span> <span class="token operator">=</span> Client<span class="token punctuation">.</span>inactivated
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token comment"># This action uses POST parameters. They are most likely coming</span>
  <span class="token comment"># from an HTML form that the user has submitted. The URL for</span>
  <span class="token comment"># this RESTful request will be &quot;/clients&quot;, and the data will be</span>
  <span class="token comment"># sent as part of the request body.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>
    <span class="token variable">@client</span> <span class="token operator">=</span> <span class="token class-name">Client</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:client</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token variable">@client</span><span class="token punctuation">.</span>save
      redirect_to <span class="token variable">@client</span>
    <span class="token keyword">else</span>
      <span class="token comment"># This line overrides the default rendering behavior, which</span>
      <span class="token comment"># would have been to render the &quot;create&quot; view.</span>
      render <span class="token string-literal"><span class="token string">&quot;new&quot;</span></span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><ul><li><p>Hash and Array Parameters</p> <p>The <code>params</code>hash is not limited to one-dimensional keys and values. It can contain nested arrays and hashes. To send an array of values, append an empty pair of square brackets &quot;[]&quot; to the key name:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token constant">GET</span> <span class="token operator">/</span>clients<span class="token operator">?</span>ids<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>ids<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">&amp;</span>ids<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The value of <code>params[:ids]</code>will now be <code>[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]</code>. Note that parameter values are always strings; Rails does not attempt to guess or cast the type.</p> <p>To send a hash, you include the key name inside the brackets:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token operator">&lt;</span>form accept<span class="token operator">-</span>charset<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;UTF-8&quot;</span></span> action<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;/clients&quot;</span></span> method<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;post&quot;</span></span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;text&quot;</span></span> name<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;client[name]&quot;</span></span> value<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;Acme&quot;</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;text&quot;</span></span> name<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;client[phone]&quot;</span></span> value<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;12345&quot;</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;text&quot;</span></span> name<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;client[address][postcode]&quot;</span></span> value<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;12345&quot;</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;text&quot;</span></span> name<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;client[address][city]&quot;</span></span> value<span class="token operator">=</span><span class="token string-literal"><span class="token string">&quot;Carrot City&quot;</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>JSON Parameters</p> <p>If you're writing a web service application, you might find yourself more comfortable accepting parameters in JSON format. If the &quot;Content-Type&quot; header of your request is set to &quot;application/json&quot;, Rails will automatically load your parameters into the <code>params</code>
 hash, which you can access as you would normally.</p> <p>So for example, if you are sending this JSON content:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;company&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;acme&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123 Carrot Street&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Your controller will receive <code>params[:company]</code>as <code>{ &quot;name&quot; =&gt; &quot;acme&quot;, &quot;address&quot; =&gt; &quot;123 Carrot Street&quot; }</code>
.</p></li></ul></li> <li><p>Input Filtering</p> <p>Action Controller parameters are forbidden to be used in Active Model mass assignments until they have been permitted.</p> <p>This means that you'll have to make a conscious decision about which attributes to permit for mass update. This is a better security practice to help prevent accidentally allowing users to update sensitive model attributes.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>params<span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">:id</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>permits the specified key (<code>:id</code>) for inclusion if it appears in <code>params</code>and it has a permitted scalar value associated. Otherwise, the key is going to be filtered out, so arrays, hashes, or any other objects cannot be injected.</p> <p>The permitted scalar types are <code>String</code>, <code>Symbol</code>, <code>NilClass</code>, <code>Numeric</code>, <code>TrueClass</code> , <code>FalseClass</code>, <code>Date</code>, <code>Time</code>, <code>DateTime</code>, <code>StringIO</code>, <code>IO</code>, <code>ActionDispatch::Http::UploadedFile</code>, and <code>Rack::Test::UploadedFile</code>.</p> <p>To declare that the value in <code>params</code>must be an array of permitted scalar values, map the key to an empty array:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>params<span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">id</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Sometimes it is not possible or convenient to declare the valid keys of a hash parameter or its internal structure. Just map to an empty hash:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>params<span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">preferences</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>but be careful because this opens the door to arbitrary input. In this case, <code>permit</code>
 ensures values in the returned structure are permitted scalars and filters out anything else.</p> <p>To permit an entire hash of parameters, the <code>[permit!](https://api.rubyonrails.org/v7.0.4/classes/ActionController/Parameters.html#method-i-permit-21)</code> method can be used:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>
params<span class="token punctuation">.</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token symbol">:log_entry</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permit<span class="token operator">!</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="nested-parameter"><a href="#nested-parameter" class="header-anchor">#</a> Nested Parameter</h3> <p>You can also use <code>permit</code> on nested parameters, like:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>params<span class="token punctuation">.</span>permit<span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token symbol">emails</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token symbol">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token symbol">:name</span><span class="token punctuation">,</span>
                         <span class="token punctuation">{</span> <span class="token symbol">family</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token symbol">:name</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token symbol">hobbies</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/the_basic/Controller.html" class="prev">
        Controller
      </a></span> <span class="next"><a href="/the_basic/Response.html">
        Response
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7adc5413.js" defer></script><script src="/assets/js/2.72a95a92.js" defer></script><script src="/assets/js/39.3159a702.js" defer></script>
  </body>
</html>
