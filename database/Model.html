<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Model |  Ruby on Rails Documentattion </title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="RoR Documentation for Beginners">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.7adc5413.js" as="script"><link rel="preload" href="/assets/js/2.72a95a92.js" as="script"><link rel="preload" href="/assets/js/14.840b181d.js" as="script"><link rel="prefetch" href="/assets/js/10.a520d8be.js"><link rel="prefetch" href="/assets/js/11.f290d03c.js"><link rel="prefetch" href="/assets/js/12.52c96c43.js"><link rel="prefetch" href="/assets/js/13.2df3af10.js"><link rel="prefetch" href="/assets/js/15.71342207.js"><link rel="prefetch" href="/assets/js/16.9d4ff7c3.js"><link rel="prefetch" href="/assets/js/17.842c0f28.js"><link rel="prefetch" href="/assets/js/18.93bc7927.js"><link rel="prefetch" href="/assets/js/19.5935f0d0.js"><link rel="prefetch" href="/assets/js/20.cdf58d7d.js"><link rel="prefetch" href="/assets/js/21.3166d2bf.js"><link rel="prefetch" href="/assets/js/22.b1a0c7ae.js"><link rel="prefetch" href="/assets/js/23.df366c28.js"><link rel="prefetch" href="/assets/js/24.fc6d5a86.js"><link rel="prefetch" href="/assets/js/25.2115eb5e.js"><link rel="prefetch" href="/assets/js/26.a5569d65.js"><link rel="prefetch" href="/assets/js/27.214f9614.js"><link rel="prefetch" href="/assets/js/28.6263065f.js"><link rel="prefetch" href="/assets/js/29.0f98370e.js"><link rel="prefetch" href="/assets/js/3.447679a1.js"><link rel="prefetch" href="/assets/js/30.1182db89.js"><link rel="prefetch" href="/assets/js/31.38016aaf.js"><link rel="prefetch" href="/assets/js/32.626ffe2b.js"><link rel="prefetch" href="/assets/js/33.039db41a.js"><link rel="prefetch" href="/assets/js/34.76b65e88.js"><link rel="prefetch" href="/assets/js/35.1f504bd2.js"><link rel="prefetch" href="/assets/js/36.2089506c.js"><link rel="prefetch" href="/assets/js/37.54d694f8.js"><link rel="prefetch" href="/assets/js/38.8a179bd0.js"><link rel="prefetch" href="/assets/js/39.3159a702.js"><link rel="prefetch" href="/assets/js/4.fb941f04.js"><link rel="prefetch" href="/assets/js/40.3697d274.js"><link rel="prefetch" href="/assets/js/41.b554a771.js"><link rel="prefetch" href="/assets/js/42.45c82fe7.js"><link rel="prefetch" href="/assets/js/43.b54c5bed.js"><link rel="prefetch" href="/assets/js/44.fbcc36d7.js"><link rel="prefetch" href="/assets/js/5.384b96a2.js"><link rel="prefetch" href="/assets/js/6.d92e70ec.js"><link rel="prefetch" href="/assets/js/7.189f016f.js"><link rel="prefetch" href="/assets/js/8.f4a80106.js"><link rel="prefetch" href="/assets/js/9.1176b470.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> Ruby on Rails Documentattion </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Ruby on rails</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Basic</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Database</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/" aria-current="page" class="sidebar-link">Database</a></li><li><a href="/database/Configurations.html" class="sidebar-link">Configurations</a></li><li><a href="/database/Active Record ORM.html" class="sidebar-link">Active Record ORM</a></li><li><a href="/database/Active Record Migrations.html" class="sidebar-link">Active Record Migrations</a></li><li><a href="/database/Model.html" aria-current="page" class="active sidebar-link">Model</a></li><li><a href="/database/Validation.html" class="sidebar-link">Validation</a></li><li><a href="/database/Relationships.html" class="sidebar-link">Relationships</a></li><li><a href="/database/Callbacks.html" class="sidebar-link">Callbacks</a></li><li><a href="/database/Query Builder.html" class="sidebar-link">Query Builder</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Digging Deeper</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Packages</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="model"><a href="#model" class="header-anchor">#</a> Model</h1> <p>The model, resource, and scaffold generators will create migrations appropriate for adding a new model. This migration will already contain instructions for creating the relevant table. If you tell Rails what columns you want, then statements for adding these columns will also be created. For example, running:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>bin<span class="token operator">/</span>rails generate model Product name<span class="token symbol">:string</span> description<span class="token symbol">:text</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This will create a <code>Product</code>model and migration, mapped to a <code>products</code>table at the database.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token operator">&lt;</span> ApplicationRecord
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>migration looks like:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">CreateProducts</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Migration<span class="token punctuation">[</span><span class="token number">7.0</span><span class="token punctuation">]</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">change</span></span>
    create_table <span class="token symbol">:products</span> <span class="token keyword">do</span> <span class="token operator">|</span>t<span class="token operator">|</span>
      t<span class="token punctuation">.</span>string <span class="token symbol">:name</span>
      t<span class="token punctuation">.</span>text <span class="token symbol">:description</span>

      t<span class="token punctuation">.</span>timestamps
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p><strong>Table Name</strong></p> <p>After glancing at the example above, you may have noticed that we did not tell Eloquent which database table corresponds to our Product model. By convention, the &quot;snake case&quot;, plural name of the class will be used as the table name unless another name is explicitly specified.</p> <p>If your model's corresponding database table does not fit this convention, you may manually specify the model's table name by defining a **<code>table_name</code>**property on the model:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token operator">&lt;</span> ApplicationRecord
  <span class="token keyword">self</span><span class="token punctuation">.</span>table_name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;my_products&quot;</span></span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>If you do so, you will have to define manually the class name that is hosting the fixtures (my_products.yml) using the <code>set_fixture_class</code> method in your test definition:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">ProductTest</span> <span class="token operator">&lt;</span> ActiveSupport<span class="token double-colon punctuation">::</span>TestCase
  set_fixture_class my_products<span class="token operator">:</span> Product
  fixtures <span class="token symbol">:my_products</span>
  <span class="token comment"># ...</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>It's also possible to override the column that should be used as the table's primary key using the <code>ActiveRecord::Base.primary_key=</code>method:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token operator">&lt;</span> ApplicationRecord
  <span class="token keyword">self</span><span class="token punctuation">.</span>primary_key <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;product_id&quot;</span></span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Active Record does not support using non-primary key columns named <code>id</code>.</p></li> <li><p>Create</p> <p>Active Record objects can be created from a hash, a block, or have their attributes manually set after creation. The <code>new</code>method will return a new object while <code>create</code>will return the object and save it to the database.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment">#create</span>
user <span class="token operator">=</span> User<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;David&quot;</span></span><span class="token punctuation">,</span> <span class="token symbol">occupation</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;Code Artist&quot;</span></span><span class="token punctuation">)</span>

<span class="token comment">#new</span>
user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">new</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;David&quot;</span></span>
user<span class="token punctuation">.</span>occupation <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Code Artist&quot;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>Read</p> <p>Active Record provides a rich API for accessing data within a database. Below are a few examples of different data access methods provided by Active Record.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># return a collection with all users</span>
users <span class="token operator">=</span> User<span class="token punctuation">.</span>all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># return the first user</span>
user <span class="token operator">=</span> User<span class="token punctuation">.</span>first
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># return the first user named David</span>
david <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'David'</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># find all users named David who are Code Artists and sort by created_at in reverse chronological order</span>
users <span class="token operator">=</span> User<span class="token punctuation">.</span>where<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'David'</span></span><span class="token punctuation">,</span> <span class="token symbol">occupation</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'Code Artist'</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>order<span class="token punctuation">(</span><span class="token symbol">created_at</span><span class="token operator">:</span> <span class="token symbol">:desc</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>Update</p> <p>Once an Active Record object has been retrieved, its attributes can be modified and it can be saved to the database.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>user <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'David'</span></span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Dave'</span></span>
user<span class="token punctuation">.</span>save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>A shorthand for this is to use a hash mapping attribute names to the desired value, like so:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>user <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'David'</span></span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'Dave'</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>This is most useful when updating several attributes at once. If, on the other hand, you'd like to update several records in bulk, you may find the <code>update_all</code>class method useful:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>User<span class="token punctuation">.</span>update_all <span class="token string-literal"><span class="token string">&quot;max_login_attempts = 3, must_change_password = 'true'&quot;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This is the same as if you wrote:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>User<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token symbol">:all</span><span class="token punctuation">,</span> <span class="token symbol">max_login_attempts</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token symbol">must_change_password</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Delete</p> <p>Likewise, once retrieved an Active Record object can be destroyed which removes it from the database.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>user <span class="token operator">=</span> User<span class="token punctuation">.</span>find_by<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'David'</span></span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span>destroy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>If you'd like to delete several records in bulk, you may use  <code>destroy_by</code>  or  <code>destroy_all</code>  method:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment"># find and delete all users named David</span>
User<span class="token punctuation">.</span>destroy_by<span class="token punctuation">(</span><span class="token symbol">name</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'David'</span></span><span class="token punctuation">)</span>

<span class="token comment"># delete all users</span>
User<span class="token punctuation">.</span>destroy_all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/database/Active Record Migrations.html" class="prev">
        Active Record Migrations
      </a></span> <span class="next"><a href="/database/Validation.html">
        Validation
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7adc5413.js" defer></script><script src="/assets/js/2.72a95a92.js" defer></script><script src="/assets/js/14.840b181d.js" defer></script>
  </body>
</html>
