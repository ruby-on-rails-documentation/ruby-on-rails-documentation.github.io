(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{312:function(s,t,e){"use strict";e.r(t);var a=e(13),r=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"routing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#routing"}},[s._v("#")]),s._v(" Routing")]),s._v(" "),t("h3",{attrs:{id:"basic-routing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basic-routing"}},[s._v("#")]),s._v(" Basic Routing")]),s._v(" "),t("p",[s._v("The most basic Rails routes accept a URI and Controller method, providing a very simple and expressive method of defining routes and behavior without complicated routing configuration files:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/photos'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos#index'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("the request is dispatched to the photos controller's index action\n.")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("The Default Route Files")]),s._v(" "),t("p",[s._v("All Rails routes are defined in your route files, which are located in the config\ndirectory.")])]),s._v(" "),t("li",[t("p",[s._v("Available Route Methods")]),s._v(" "),t("p",[s._v("Rails supports four different routes methods in application")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uri'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'controller#method'")])]),s._v("\npost "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uri'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'controller#method'")])]),s._v("\npatch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("put "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uri'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'controller#method'")])]),s._v("\ndelete "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uri'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'controller#method'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("CSRF Protection")]),s._v(" "),t("p",[s._v("Remember, any HTML forms pointing to "),t("strong",[t("code",[s._v("POST")])]),s._v(", "),t("strong",[t("code",[s._v("PUT")])]),s._v(", "),t("strong",[t("code",[s._v("PATCH")])]),s._v(", or "),t("strong",[t("code",[s._v("DELETE")])]),s._v(" routes that are defined in the "),t("strong",[t("code",[s._v("web")])]),s._v(" routes file should include a CSRF token field. Otherwise, the request will be rejected.")]),s._v(" "),t("p",[s._v("As a Rails developer, you basically get CSRF protection for free. It starts with this single line in "),t("strong",[s._v("application_controller.rb")]),s._v(", which enables CSRF protection:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("protect_from_forgery with"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":exception")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Next, there's this single line in "),t("strong",[s._v("application.html.erb")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%=")]),s._v(" csrf_meta_tags "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Redirect Routes")]),s._v(" "),t("p",[s._v("You can redirect any path to another path by using the "),t("code",[s._v("[redirect](https://api.rubyonrails.org/v7.0.4/classes/ActionDispatch/Routing/Redirection.html#method-i-redirect)")]),s._v(" helper in your router:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/stories'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" redirect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/articles'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("You can also reuse dynamic segments from the match in the path to redirect to:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/stories/:name'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" redirect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/articles/%{name}'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("You can also provide a block to "),t("code",[s._v("redirect")]),s._v(", which receives the symbolized path parameters and the request object:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/stories/:name'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" redirect "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("path_params"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/articles/')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),t("span",{pre:!0,attrs:{class:"token content"}},[s._v("path_params"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pluralize")]),t("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nget "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/stories'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" redirect "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("path_params"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" req"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/articles/')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("#{")]),t("span",{pre:!0,attrs:{class:"token content"}},[s._v("req"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("subdomain")]),t("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v('Please note that default redirection is a 301 "Moved Permanently" redirect. Keep in mind that some web browsers or proxy servers will cache this type of redirect, making the old page inaccessible. You can use the '),t("code",[s._v(":status")]),s._v("option to change the response status:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/stories/:name'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" redirect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/articles/%{name}'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("302")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("The Route List")]),s._v(" "),t("p",[s._v("The routes Artisan command can easily provide an overview of all of the routes that are defined by your application:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("You can also use the "),t("code",[s._v("--expanded")]),s._v(" option to turn on the expanded table formatting mode.")]),s._v(" "),t("p",[s._v("You can search through your routes with the grep option: -g. This outputs any routes that partially match the URL helper method name, the HTTP verb, or the URL path.")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g new_comment\nbin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POST")]),s._v("\nbin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g admin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("If you only want to see the routes that map to a specific controller, there's the -c option.")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c users\nbin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c admin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users\nbin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c Comments\nbin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("rails routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c Articles"),t("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("CommentsController\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Route Globbling and Wildcard Segments")]),s._v(" "),t("p",[s._v("Route globbing is a way to specify that a particular parameter should be matched to all the remaining parts of a route. For example:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos/*other'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos#unknown'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("This route would match "),t("code",[s._v("photos/12")]),s._v("or "),t("code",[s._v("/photos/long/path/to/12")]),s._v(", setting "),t("code",[s._v("params[:other]")]),s._v("\nto "),t("code",[s._v('"12"')]),s._v("or "),t("code",[s._v('"long/path/to/12"')]),s._v('. The segments prefixed with a star are called "wildcard segments".')])]),s._v(" "),t("li",[t("p",[s._v("Using root")]),s._v(" "),t("p",[s._v("You can specify what Rails should route "),t("code",[s._v("'/'")]),s._v(" to with the "),t("code",[s._v("[root](https://api.rubyonrails.org/v7.0.4/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-root)")]),s._v(" method:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("root to"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pages#main'")])]),s._v("\nroot "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pages#main'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# shortcut for the above")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("You should put the "),t("code",[s._v("root")]),s._v("route at the top of the file, because it is the most popular route and should be matched first.")])])]),s._v(" "),t("h3",{attrs:{id:"routes-parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#routes-parameters"}},[s._v("#")]),s._v(" Routes Parameters")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Required Parameters")]),s._v(" "),t("p",[s._v("Sometimes you will need to capture segments of the URI within your route. For example, you may need to capture a user's ID from the URL. You may do so by defining route parameters:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'users/:id'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'users#display'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("If an incoming request of "),t("code",[s._v("/photos/1")]),s._v("is processed by this route (because it hasn't matched any previous route in the file), then the result will be to invoke the "),t("code",[s._v("display")]),s._v("action of the "),t("code",[s._v("PhotosController")]),s._v(", and to make the final parameter "),t("code",[s._v('"1"')]),s._v("available as "),t("code",[s._v("params[:id]")]),s._v("\n. This route will also route the incoming request of "),t("code",[s._v("/photos")]),s._v("to "),t("code",[s._v("PhotosController#display")]),s._v(", since "),t("code",[s._v(":")]),s._v("is an optional parameter, denoted by parentheses.")]),s._v(" "),t("p",[s._v("You can set up as many dynamic segments within a regular route as you like. Any segment will be available to the action as part of "),t("code",[s._v("params")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos/:id/:user_id'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos#show'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("The Query String")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("params")]),s._v(" will also include any parameters from the query string. For example, with this route:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos/:id'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos#show'")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("An incoming path of "),t("code",[s._v("/photos/1?user_id=2")]),s._v("will be dispatched to the "),t("code",[s._v("show")]),s._v(" action of the "),t("code",[s._v("Photos")]),s._v("controller. "),t("code",[s._v("params")]),s._v("will be "),t("code",[s._v("{ controller: 'photos', action: 'show', id: '1', user_id: '2' }")]),s._v("\n.")])]),s._v(" "),t("li",[t("p",[s._v("Defining Defaults")]),s._v(" "),t("p",[s._v("You can define defaults in a route by supplying a hash for the "),t("code",[s._v(":defaults")]),s._v("option. This even applies to parameters that you do not specify as dynamic segments. For example:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos/:id'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos#show'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("defaults")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("format")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jpg'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("You can also use a "),t("code",[s._v("[defaults](https://api.rubyonrails.org/v7.0.4/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-defaults)")]),s._v(" block to define the defaults for multiple items:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("defaults format"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":json")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":photos")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Regular Expression Constraints")]),s._v(" "),t("p",[s._v("You can use the "),t("code",[s._v(":constraints")]),s._v("option to enforce a format for a dynamic segment:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos/:id'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'photos#show'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("constraints")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex-literal"}},[t("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/[A-Z]\\d{5}/")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Named Routes")])]),s._v(" "),t("p",[s._v("You can specify a name for any route using the "),t("code",[s._v(":as")]),s._v(" option:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("get "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exit'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("to")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sessions#destroy'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v("as")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":logout")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("This will create "),t("code",[s._v("logout_path")]),s._v(" and "),t("code",[s._v("logout_url")]),s._v(" as named route helpers in your application. Calling "),t("code",[s._v("logout_path")]),s._v(" will return "),t("code",[s._v("/exit")])])])]),s._v(" "),t("h3",{attrs:{id:"resource-routing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resource-routing"}},[s._v("#")]),s._v(" Resource Routing")]),s._v(" "),t("p",[s._v("Resource routing allows you to quickly declare all of the common routes for a given resourceful controller. A single call to "),t("code",[s._v("[resources](https://api.rubyonrails.org/v7.0.4/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources)")]),s._v("can declare all of the necessary routes for your "),t("code",[s._v("index")]),s._v(", "),t("code",[s._v("show")]),s._v(", "),t("code",[s._v("new")]),s._v(", "),t("code",[s._v("edit")]),s._v(", "),t("code",[s._v("create")]),s._v(", "),t("code",[s._v("update")]),s._v(", and "),t("code",[s._v("destroy")]),s._v("actions.")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":photos")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("creates seven different routes in your application, all mapping to the "),t("code",[s._v("Photos")]),s._v(" controller:")]),s._v(" "),t("p",[s._v("| --- | --- | --- | --- |")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Path and URL Helper")]),s._v(" "),t("p",[s._v("Creating a resourceful route will also expose a number of helpers to the controllers in your application. In the case of "),t("code",[s._v("resources :photos")]),s._v(":")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("photos_path")]),s._v(" returns "),t("code",[s._v("/photos")])]),s._v(" "),t("li",[t("code",[s._v("new_photo_path")]),s._v(" returns "),t("code",[s._v("/photos/new")])]),s._v(" "),t("li",[t("code",[s._v("edit_photo_path(:id)")]),s._v(" returns "),t("code",[s._v("/photos/:id/edit")]),s._v(" (for instance, "),t("code",[s._v("edit_photo_path(10)")]),s._v(" returns "),t("code",[s._v("/photos/10/edit")]),s._v(")")]),s._v(" "),t("li",[t("code",[s._v("photo_path(:id)")]),s._v(" returns "),t("code",[s._v("/photos/:id")]),s._v(" (for instance, "),t("code",[s._v("photo_path(10)")]),s._v(" returns "),t("code",[s._v("/photos/10")]),s._v(")")])]),s._v(" "),t("p",[s._v("Each of these helpers has a corresponding "),t("code",[s._v("_url")]),s._v(" helper (such as "),t("code",[s._v("photos_url")]),s._v(") which returns the same path prefixed with the current host, port, and path prefix.")])]),s._v(" "),t("li",[t("p",[s._v("Defining Multiple Resource at same time")]),s._v(" "),t("p",[s._v("If you need to create routes for more than one resource, you can save a bit of typing by defining them all with a single call to "),t("code",[s._v("resources")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":photos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":books")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":videos")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("This works exactly the same as:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":photos")]),s._v("\nresources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":books")]),s._v("\nresources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":videos")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"route-groups"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#route-groups"}},[s._v("#")]),s._v(" Route Groups")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Controllers")]),s._v(" "),t("p",[s._v("You may wish to organize groups of controllers under a namespace. Most commonly, you might group a number of administrative controllers under an "),t("code",[s._v("Admin::")]),s._v("namespace, and place these controllers under the "),t("code",[s._v("app/controllers/admin")]),s._v("directory. You can route to such a group by using a "),t("code",[s._v("[namespace](https://api.rubyonrails.org/v7.0.4/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-namespace)")]),s._v("block:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("namespace "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":admin")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":articles")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":comments")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("This will create a number of routes for each of the "),t("code",[s._v("articles")]),s._v("and "),t("code",[s._v("comments")]),s._v("\n controller. For "),t("code",[s._v("Admin::ArticlesController")]),s._v(", Rails will create:")]),s._v(" "),t("p",[s._v("| --- | --- | --- | --- |")]),s._v(" "),t("p",[s._v("If instead you want to route "),t("code",[s._v("/articles")]),s._v("(without the prefix "),t("code",[s._v("/admin")]),s._v(") to "),t("code",[s._v("Admin::ArticlesController")]),s._v(", you can specify the module with a "),t("code",[s._v("[scope](https://api.rubyonrails.org/v7.0.4/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-scope)")]),s._v("\n block:")])]),s._v(" "),t("li",[t("p",[s._v("Nested Resources")]),s._v(" "),t("p",[s._v("It's common to have resources that are logically children of other resources. For example, suppose your application includes these models:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Magazine")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ApplicationRecord\n  has_many "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ads")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ad")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ApplicationRecord\n  belongs_to "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":magazine")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("Nested routes allow you to capture this relationship in your routing. In this case, you could include this route declaration:")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":magazines")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  resources "),t("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":ads")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("In addition to the routes for magazines, this declaration will also route ads to an "),t("code",[s._v("AdsController")]),s._v(". The ad URLs require a magazine:")]),s._v(" "),t("p",[s._v("| --- | --- | --- | --- |")]),s._v(" "),t("p",[s._v("This will also create routing helpers such as "),t("code",[s._v("magazine_ads_url")]),s._v("and "),t("code",[s._v("edit_magazine_ad_path")]),s._v("\n. These helpers take an instance of Magazine as the first parameter ("),t("code",[s._v("magazine_ads_url(@magazine)")]),s._v(").")])]),s._v(" "),t("li",[t("p",[s._v("Routing Concerns")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);