<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Response |  Ruby on Rails Documentattion </title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="RoR Documentation for Beginners">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.7adc5413.js" as="script"><link rel="preload" href="/assets/js/2.72a95a92.js" as="script"><link rel="preload" href="/assets/js/40.3697d274.js" as="script"><link rel="prefetch" href="/assets/js/10.a520d8be.js"><link rel="prefetch" href="/assets/js/11.f290d03c.js"><link rel="prefetch" href="/assets/js/12.52c96c43.js"><link rel="prefetch" href="/assets/js/13.2df3af10.js"><link rel="prefetch" href="/assets/js/14.840b181d.js"><link rel="prefetch" href="/assets/js/15.71342207.js"><link rel="prefetch" href="/assets/js/16.9d4ff7c3.js"><link rel="prefetch" href="/assets/js/17.842c0f28.js"><link rel="prefetch" href="/assets/js/18.93bc7927.js"><link rel="prefetch" href="/assets/js/19.5935f0d0.js"><link rel="prefetch" href="/assets/js/20.cdf58d7d.js"><link rel="prefetch" href="/assets/js/21.3166d2bf.js"><link rel="prefetch" href="/assets/js/22.b1a0c7ae.js"><link rel="prefetch" href="/assets/js/23.df366c28.js"><link rel="prefetch" href="/assets/js/24.fc6d5a86.js"><link rel="prefetch" href="/assets/js/25.2115eb5e.js"><link rel="prefetch" href="/assets/js/26.a5569d65.js"><link rel="prefetch" href="/assets/js/27.214f9614.js"><link rel="prefetch" href="/assets/js/28.6263065f.js"><link rel="prefetch" href="/assets/js/29.0f98370e.js"><link rel="prefetch" href="/assets/js/3.447679a1.js"><link rel="prefetch" href="/assets/js/30.1182db89.js"><link rel="prefetch" href="/assets/js/31.38016aaf.js"><link rel="prefetch" href="/assets/js/32.626ffe2b.js"><link rel="prefetch" href="/assets/js/33.039db41a.js"><link rel="prefetch" href="/assets/js/34.76b65e88.js"><link rel="prefetch" href="/assets/js/35.1f504bd2.js"><link rel="prefetch" href="/assets/js/36.2089506c.js"><link rel="prefetch" href="/assets/js/37.54d694f8.js"><link rel="prefetch" href="/assets/js/38.8a179bd0.js"><link rel="prefetch" href="/assets/js/39.3159a702.js"><link rel="prefetch" href="/assets/js/4.fb941f04.js"><link rel="prefetch" href="/assets/js/41.b554a771.js"><link rel="prefetch" href="/assets/js/42.45c82fe7.js"><link rel="prefetch" href="/assets/js/43.b54c5bed.js"><link rel="prefetch" href="/assets/js/44.fbcc36d7.js"><link rel="prefetch" href="/assets/js/5.384b96a2.js"><link rel="prefetch" href="/assets/js/6.d92e70ec.js"><link rel="prefetch" href="/assets/js/7.189f016f.js"><link rel="prefetch" href="/assets/js/8.f4a80106.js"><link rel="prefetch" href="/assets/js/9.1176b470.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> Ruby on Rails Documentattion </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Ruby on rails</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Basic</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/the_basic/" aria-current="page" class="sidebar-link">The Basic</a></li><li><a href="/the_basic/Routing.html" class="sidebar-link">Routing</a></li><li><a href="/the_basic/CSRF Protection.html" class="sidebar-link">CSRF Protection</a></li><li><a href="/the_basic/Controller.html" class="sidebar-link">Controller</a></li><li><a href="/the_basic/Request.html" class="sidebar-link">Request</a></li><li><a href="/the_basic/Response.html" aria-current="page" class="active sidebar-link">Response</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/the_basic/ERB Template.html" class="sidebar-link">ERB Template</a></li><li><a href="/the_basic/Asset Bundling Webpacker.html" class="sidebar-link">Asset Bundling (Webpacker)</a></li><li><a href="/the_basic/URL Generation.html" class="sidebar-link">URL Generation</a></li><li><a href="/the_basic/Sessions.html" class="sidebar-link">Sessions</a></li><li><a href="/the_basic/Validations.html" class="sidebar-link">Validations</a></li><li><a href="/the_basic/Logging.html" class="sidebar-link">Logging</a></li><li><a href="/the_basic/Error Handling.html" class="sidebar-link">Error Handling</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Digging Deeper</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Packages</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="response"><a href="#response" class="header-anchor">#</a> Response</h1> <p>From the controller's point of view, there are three ways to create an HTTP response:</p> <ul><li><p>Call <code>render</code> to create a full response to send back to the browser</p></li> <li><p>Call <code>redirect_to</code> to send an HTTP redirect status code to the browser</p></li> <li><p>Call <code>head</code> to create a response consisting solely of HTTP headers to send back to the browser</p></li> <li><p>Using render</p> <p>In most cases, the <code>[ActionController::Base#render](https://api.rubyonrails.org/v7.0.4/classes/AbstractController/Rendering.html#method-i-render)</code> method does the heavy lifting of rendering your application's content for use by a browser. There are a variety of ways to customize the behavior of <code>render</code>. You can render the default view for a Rails template, or a specific template, or a file, or inline code, or nothing at all. You can render text, JSON, or XML. You can specify the content type or HTTP status of the rendered response as well .</p> <p>If you want to see the exact results of a call to <code>render</code>without needing to inspect it in a browser, you can call <code>render_to_string</code>. This method takes exactly the same options as <code>render</code>, but it returns a string instead of sending a response back to the browser.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token comment">#Action View</span>
render <span class="token string-literal"><span class="token string">&quot;edit&quot;</span></span>
render action<span class="token operator">:</span> <span class="token symbol">:edit</span>

<span class="token comment">#Rendering an Action's Template from Another Controller</span>
render <span class="token string-literal"><span class="token string">&quot;products/show&quot;</span></span>
render template<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;products/show&quot;</span></span>

<span class="token comment">#with :inline</span>
render inline<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;&lt;% products.each do |p| %&gt;&lt;p&gt;&lt;%= p.name %&gt;&lt;/p&gt;&lt;% end %&gt;&quot;</span></span>

<span class="token comment">#Rendering Text</span>
render plain<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;OK&quot;</span></span>

<span class="token comment">#Rendering HTML</span>
render html<span class="token operator">:</span> helpers<span class="token punctuation">.</span>tag<span class="token punctuation">.</span>strong<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'Not Found'</span></span><span class="token punctuation">)</span>

<span class="token comment">#rendering json</span>
render json<span class="token operator">:</span> <span class="token variable">@product</span>

<span class="token comment">#rendering XMl</span>
render json<span class="token operator">:</span> <span class="token variable">@product</span>

<span class="token comment">#Rendering Vanilla JavaScript</span>
render js<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;alert('Hello Rails');&quot;</span></span>

<span class="token comment">#Rendering raw body</span>
render body<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;raw&quot;</span></span>

<span class="token comment">#Rendering raw file</span>
render file<span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">Rails<span class="token punctuation">.</span>root</span><span class="token delimiter punctuation">}</span></span><span class="token string">/public/404.html&quot;</span></span><span class="token punctuation">,</span> <span class="token symbol">layout</span><span class="token operator">:</span> <span class="token boolean">false</span>

<span class="token comment">#Rendering objects</span>
render <span class="token class-name">MyRenderable</span><span class="token punctuation">.</span><span class="token keyword">new</span>

<span class="token comment">#The :status Option</span>
render status<span class="token operator">:</span> <span class="token number">500</span>
render status<span class="token operator">:</span> <span class="token symbol">:forbidden</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div></li> <li><p>Using redirect_to</p> <p>Another way to handle returning responses to an HTTP request is with <code>redirect_to</code>. As you've seen, <code>render</code>tells Rails which view (or other asset) to use in constructing a response. The <code>redirect_to</code>method does something completely different: it tells the browser to send a new request for a different URL. For example, you could redirect from wherever you are in your code to the index of photos in your application with this call:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>redirect_to photos_url
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You can use <code>redirect_back</code>to return the user to the page they just came from. This location is pulled from the <code>HTTP_REFERER</code>header which is not guaranteed to be set by the browser, so you must provide the <code>fallback_location</code>to use in this case.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>redirect_back<span class="token punctuation">(</span><span class="token symbol">fallback_location</span><span class="token operator">:</span> root_path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Using Head to build header-only responses</p> <p>The <code>head</code> method can be used to send responses with only headers to the browser.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>head <span class="token symbol">:bad_request</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Or you can use other HTTP headers to convey other information:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>head <span class="token symbol">:created</span><span class="token punctuation">,</span> <span class="token symbol">location</span><span class="token operator">:</span> photo_path<span class="token punctuation">(</span><span class="token variable">@photo</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="other-response-type"><a href="#other-response-type" class="header-anchor">#</a> Other Response Type</h3> <ul><li><p>Sending File</p> <p>If you want to send a file that already exists on disk, use the <code>send_file</code> method.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">ClientsController</span> <span class="token operator">&lt;</span> ApplicationController
  <span class="token comment"># Stream a file that has already been generated and stored on disk.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">download_pdf</span></span>
    client <span class="token operator">=</span> Client<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    send_file<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">Rails<span class="token punctuation">.</span>root</span><span class="token delimiter punctuation">}</span></span><span class="token string">/files/clients/</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">client<span class="token punctuation">.</span>id</span><span class="token delimiter punctuation">}</span></span><span class="token string">.pdf&quot;</span></span><span class="token punctuation">,</span>
              <span class="token symbol">filename</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">client<span class="token punctuation">.</span>name</span><span class="token delimiter punctuation">}</span></span><span class="token string">.pdf&quot;</span></span><span class="token punctuation">,</span>
              <span class="token symbol">type</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;application/pdf&quot;</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>This will read and stream the file 4 kB at the time, avoiding loading the entire file into memory at once. You can turn off streaming with the <code>:stream</code> option or adjust the block size with the <code>:buffer_size</code> option.</p> <p>If <code>:type</code> is not specified, it will be guessed from the file extension specified in <code>:filename</code>. If the content-type is not registered for the extension, <code>application/octet-stream</code> will be used.</p></li> <li><p>Sending Data</p> <p>Sometimes you may want to send a file to the user instead of rendering an HTML page.</p> <p>To stream data to the client, use <code>send_data</code>:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;prawn&quot;</span></span>
<span class="token keyword">class</span> <span class="token class-name">ClientsController</span> <span class="token operator">&lt;</span> ApplicationController
  <span class="token comment"># Generates a PDF document with information on the client and</span>
  <span class="token comment"># returns it. The user will get the PDF as a file download.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">download_pdf</span></span>
    client <span class="token operator">=</span> Client<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    send_data generate_pdf<span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token symbol">filename</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">client<span class="token punctuation">.</span>name</span><span class="token delimiter punctuation">}</span></span><span class="token string">.pdf&quot;</span></span><span class="token punctuation">,</span>
              <span class="token symbol">type</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;application/pdf&quot;</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">private</span>
    <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">generate_pdf</span></span><span class="token punctuation">(</span>client<span class="token punctuation">)</span>
      Prawn<span class="token double-colon punctuation">::</span><span class="token class-name">Document</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token keyword">do</span>
        text client<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token symbol">align</span><span class="token operator">:</span> <span class="token symbol">:center</span>
        text <span class="token string-literal"><span class="token string">&quot;Address: </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">client<span class="token punctuation">.</span>address</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span>
        text <span class="token string-literal"><span class="token string">&quot;Email: </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">client<span class="token punctuation">.</span>email</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span>
      <span class="token keyword">end</span><span class="token punctuation">.</span>render
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>The <code>download_pdf</code> action in the example above will call a private method which actually generates the PDF document and returns it as a string. This string will then be streamed to the client as a file download, and a filename will be suggested to the user. Sometimes when streaming files to the user, you may not want them to download the file. Take images, for example, which can be embedded into HTML pages. To tell the browser a file is not meant to be downloaded, you can set the <code>:disposition</code> option to &quot;inline&quot;. The opposite and default value for this option is &quot;attachment&quot;.</p></li> <li><p>Restful Downloads</p> <p>While <code>send_data</code>works just fine, if you are creating a RESTful application having separate actions for file downloads is usually not necessary. In REST terminology, the PDF file from the example above can be considered just another representation of the client resource. Rails provides an easy and quite sleek way of doing &quot;RESTful downloads&quot;. Here's how you can rewrite the example so that the PDF download is a part of the <code>show</code>action, without any streaming:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">ClientsController</span> <span class="token operator">&lt;</span> ApplicationController
  <span class="token comment"># The user can request to receive this resource as HTML or PDF.</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">show</span></span>
    <span class="token variable">@client</span> <span class="token operator">=</span> Client<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    respond_to <span class="token keyword">do</span> <span class="token operator">|</span>format<span class="token operator">|</span>
      format<span class="token punctuation">.</span>html
      format<span class="token punctuation">.</span>pdf <span class="token punctuation">{</span> render pdf<span class="token operator">:</span> generate_pdf<span class="token punctuation">(</span><span class="token variable">@client</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>For this example to work, you have to add the PDF MIME type to Rails. This can be done by adding the following line to the file <code>config/initializers/mime_types.rb</code>:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>Mime<span class="token double-colon punctuation">::</span>Type<span class="token punctuation">.</span>register <span class="token string-literal"><span class="token string">&quot;application/pdf&quot;</span></span><span class="token punctuation">,</span> <span class="token symbol">:pdf</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Now the user can request to get a PDF version of a client just by adding &quot;.pdf&quot; to the URL:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token constant">GET</span> <span class="token operator">/</span>clients<span class="token operator">/</span><span class="token number">1.</span>pdf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Live Stream</p> <p>Rails allows you to stream more than just files. In fact, you can stream anything you would like in a response object. The <code>[ActionController::Live](https://api.rubyonrails.org/v7.0.4/classes/ActionController/Live.html)</code> module allows you to create a persistent connection with a browser. Using this module, you will be able to send arbitrary data to the browser at specific points in time.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token operator">&lt;</span> ActionController<span class="token double-colon punctuation">::</span>Base
  <span class="token keyword">include</span> ActionController<span class="token double-colon punctuation">::</span>Live

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">stream</span></span>
    response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'Content-Type'</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'text/event-stream'</span></span>
    <span class="token number">100.</span>times <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>write <span class="token string-literal"><span class="token string">&quot;hello world\n&quot;</span></span>
      sleep <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">ensure</span>
    response<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>close
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>The above code will keep a persistent connection with the browser and send 100 messages of <code>&quot;hello world\n&quot;</code>, each one second apart.</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/the_basic/Request.html" class="prev">
        Request
      </a></span> <span class="next"><a href="/the_basic/ERB Template.html">
        ERB Template
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7adc5413.js" defer></script><script src="/assets/js/2.72a95a92.js" defer></script><script src="/assets/js/40.3697d274.js" defer></script>
  </body>
</html>
