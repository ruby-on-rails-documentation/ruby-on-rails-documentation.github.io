<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configurations |  Ruby on Rails Documentattion </title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="RoR Documentation for Beginners">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.7adc5413.js" as="script"><link rel="preload" href="/assets/js/2.72a95a92.js" as="script"><link rel="preload" href="/assets/js/13.2df3af10.js" as="script"><link rel="prefetch" href="/assets/js/10.a520d8be.js"><link rel="prefetch" href="/assets/js/11.f290d03c.js"><link rel="prefetch" href="/assets/js/12.52c96c43.js"><link rel="prefetch" href="/assets/js/14.840b181d.js"><link rel="prefetch" href="/assets/js/15.71342207.js"><link rel="prefetch" href="/assets/js/16.9d4ff7c3.js"><link rel="prefetch" href="/assets/js/17.842c0f28.js"><link rel="prefetch" href="/assets/js/18.93bc7927.js"><link rel="prefetch" href="/assets/js/19.5935f0d0.js"><link rel="prefetch" href="/assets/js/20.cdf58d7d.js"><link rel="prefetch" href="/assets/js/21.3166d2bf.js"><link rel="prefetch" href="/assets/js/22.b1a0c7ae.js"><link rel="prefetch" href="/assets/js/23.df366c28.js"><link rel="prefetch" href="/assets/js/24.fc6d5a86.js"><link rel="prefetch" href="/assets/js/25.2115eb5e.js"><link rel="prefetch" href="/assets/js/26.a5569d65.js"><link rel="prefetch" href="/assets/js/27.214f9614.js"><link rel="prefetch" href="/assets/js/28.6263065f.js"><link rel="prefetch" href="/assets/js/29.0f98370e.js"><link rel="prefetch" href="/assets/js/3.447679a1.js"><link rel="prefetch" href="/assets/js/30.1182db89.js"><link rel="prefetch" href="/assets/js/31.38016aaf.js"><link rel="prefetch" href="/assets/js/32.626ffe2b.js"><link rel="prefetch" href="/assets/js/33.039db41a.js"><link rel="prefetch" href="/assets/js/34.76b65e88.js"><link rel="prefetch" href="/assets/js/35.1f504bd2.js"><link rel="prefetch" href="/assets/js/36.2089506c.js"><link rel="prefetch" href="/assets/js/37.54d694f8.js"><link rel="prefetch" href="/assets/js/38.8a179bd0.js"><link rel="prefetch" href="/assets/js/39.3159a702.js"><link rel="prefetch" href="/assets/js/4.fb941f04.js"><link rel="prefetch" href="/assets/js/40.3697d274.js"><link rel="prefetch" href="/assets/js/41.b554a771.js"><link rel="prefetch" href="/assets/js/42.45c82fe7.js"><link rel="prefetch" href="/assets/js/43.b54c5bed.js"><link rel="prefetch" href="/assets/js/44.fbcc36d7.js"><link rel="prefetch" href="/assets/js/5.384b96a2.js"><link rel="prefetch" href="/assets/js/6.d92e70ec.js"><link rel="prefetch" href="/assets/js/7.189f016f.js"><link rel="prefetch" href="/assets/js/8.f4a80106.js"><link rel="prefetch" href="/assets/js/9.1176b470.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> Ruby on Rails Documentattion </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Ruby on rails</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Basic</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Database</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/" aria-current="page" class="sidebar-link">Database</a></li><li><a href="/database/Configurations.html" aria-current="page" class="active sidebar-link">Configurations</a></li><li><a href="/database/Active Record ORM.html" class="sidebar-link">Active Record ORM</a></li><li><a href="/database/Active Record Migrations.html" class="sidebar-link">Active Record Migrations</a></li><li><a href="/database/Model.html" class="sidebar-link">Model</a></li><li><a href="/database/Validation.html" class="sidebar-link">Validation</a></li><li><a href="/database/Relationships.html" class="sidebar-link">Relationships</a></li><li><a href="/database/Callbacks.html" class="sidebar-link">Callbacks</a></li><li><a href="/database/Query Builder.html" class="sidebar-link">Query Builder</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Digging Deeper</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Packages</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="configurations"><a href="#configurations" class="header-anchor">#</a> Configurations</h1> <p>Just about every Rails application will interact with a database. You can connect to the database by setting an environment variable <code>ENV['DATABASE_URL']</code>or by using a configuration file called <code>config/database.yml</code>.</p> <p>Since there are two ways to configure your connection (using <code>config/database.yml</code> or using an environment variable) it is important to understand how they can interact.</p> <p>If you have an empty <code>config/database.yml</code> file but your <code>ENV['DATABASE_URL']</code> is present, then Rails will connect to the database via your environment variable</p> <p>If you have a <code>config/database.yml</code>but no <code>ENV['DATABASE_URL']</code>then this file will be used to connect to your database</p> <ul><li><p>DATABASE.YML</p> <p>The <code>config/database.yml</code> file contains sections for three different environments in which Rails can run by default:</p> <ul><li>The <code>development</code> environment is used on your development/local computer as you interact manually with the application.</li> <li>The <code>test</code> environment is used when running automated tests.</li> <li>The <code>production</code> environment is used when you deploy your application for the world to use.</li></ul> <p>If you wish, you can manually specify a URL inside of your <code>config/database.yml</code></p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>development<span class="token operator">:</span>
  <span class="token symbol">url</span><span class="token operator">:</span> postgresql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">/</span>blog_development<span class="token operator">?</span>pool<span class="token operator">=</span><span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The <code>config/database.yml</code>file can contain ERB tags <code>&lt;%= %&gt;</code>. Anything in the tags will be evaluated as Ruby code. You can use this to pull out data from an environment variable or to perform calculations to generate the needed connection information.</p> <p>You don't have to update the database configurations manually. If you look at the options of the application generator, you will see that one of the options is named <code>--database</code>. This option allows you to choose an adapter from a list of the most used relational databases. You can even run the generator repeatedly: <code>cd .. &amp;&amp; rails new blog --database=mysql</code>. When you confirm the overwriting of the <code>config/database.yml</code>file, your application will be configured for MySQL instead of SQLite. Detailed examples of the common database connections  are below.</p></li> <li><p>Configuring SQLite3 database</p> <p>Rails comes with built-in support for <a href="http://www.sqlite.org/" target="_blank" rel="noopener noreferrer">SQLite3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which is a lightweight serverless database application. While a busy production environment may overload SQLite, it works well for development and testing. Rails defaults to using an SQLite database when creating a new project, but you can always change it later.</p> <p>Here's the section of the default configuration file (<code>config/database.yml</code>) with connection information for the development environment:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>development<span class="token operator">:</span>
  <span class="token symbol">adapter</span><span class="token operator">:</span> sqlite3
  <span class="token symbol">database</span><span class="token operator">:</span> db<span class="token operator">/</span>development<span class="token punctuation">.</span>sqlite3
  <span class="token symbol">pool</span><span class="token operator">:</span> <span class="token number">5</span>
  <span class="token symbol">timeout</span><span class="token operator">:</span> <span class="token number">5000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>Configuring MySQL or MariaDB Database</p> <p>If you choose to use MySQL or MariaDB instead of the shipped SQLite3 database, your <code>config/database.yml</code>will look a little different. Here's the development section:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>development<span class="token operator">:</span>
  <span class="token symbol">adapter</span><span class="token operator">:</span> mysql2
  <span class="token symbol">encoding</span><span class="token operator">:</span> utf8mb4
  <span class="token symbol">database</span><span class="token operator">:</span> blog_development
  <span class="token symbol">pool</span><span class="token operator">:</span> <span class="token number">5</span>
  <span class="token symbol">username</span><span class="token operator">:</span> root
  <span class="token symbol">password</span><span class="token operator">:</span>
  <span class="token symbol">socket</span><span class="token operator">:</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>If your development database has a root user with an empty password, this configuration should work for you. Otherwise, change the username and password in the <code>development</code>
 section as appropriate.</p> <p>Advisory Locks are enabled by default on MySQL and are used to make database migrations concurrent safe. You can disable advisory locks by setting <code>advisory_locks</code> to <code>false</code>:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>production<span class="token operator">:</span>
  <span class="token symbol">adapter</span><span class="token operator">:</span> mysql2
  <span class="token symbol">advisory_locks</span><span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>Configuring  PostgreSQL Database</p> <p>Finally, you’ll want to install the pg gem so that you can interface with Postgres from Ruby code. To do so:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>gem install pg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To create a Rails app configured for Postgres, run this command:</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>rails <span class="token keyword">new</span> myapp <span class="token operator">-</span><span class="token operator">-</span>database<span class="token operator">=</span>postgresql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>the config generated will be like :</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>default<span class="token operator">:</span> <span class="token operator">&amp;</span>default
  <span class="token symbol">adapter</span><span class="token operator">:</span> postgresql
  <span class="token symbol">encoding</span><span class="token operator">:</span> unicode
  <span class="token symbol">pool</span><span class="token operator">:</span> <span class="token number">5</span>
  <span class="token symbol">host</span><span class="token operator">:</span> localhost
  <span class="token symbol">port</span><span class="token operator">:</span> <span class="token number">5432</span>

<span class="token symbol">development</span><span class="token operator">:</span>
  <span class="token operator">&lt;&lt;</span><span class="token operator">:</span> <span class="token operator">*</span>default
  <span class="token symbol">database</span><span class="token operator">:</span> app_dev
  <span class="token symbol">username</span><span class="token operator">:</span> myapp
  <span class="token symbol">password</span><span class="token operator">:</span> password1

<span class="token symbol">test</span><span class="token operator">:</span>
  <span class="token operator">&lt;&lt;</span><span class="token operator">:</span> <span class="token operator">*</span>default
  <span class="token symbol">database</span><span class="token operator">:</span> app_test
  <span class="token symbol">username</span><span class="token operator">:</span> myapp
  <span class="token symbol">password</span><span class="token operator">:</span> password1

<span class="token symbol">production</span><span class="token operator">:</span>
  <span class="token operator">&lt;&lt;</span><span class="token operator">:</span> <span class="token operator">*</span>default
  <span class="token symbol">database</span><span class="token operator">:</span> app_production
  <span class="token symbol">username</span><span class="token operator">:</span> app
  <span class="token symbol">password</span><span class="token operator">:</span> password1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></li> <li><p>configuring mongoDB</p> <p>Create a new rails application to use Ruby MongoDB. Make sure that you add –skip-active-record.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>rails <span class="token keyword">new</span> my_mongo_app <span class="token operator">-</span><span class="token operator">-</span>skip<span class="token operator">-</span>active<span class="token operator">-</span>record
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If you notice, there is no <em>database.yml</em> and no <em>sqlite3</em> gem is added automatically. Now we have to add two gems which will be a bridge for us between Rails and MongoDB.</p> <p>Add the following gems to <em>Gemfile</em>.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>gem <span class="token string-literal"><span class="token string">'mongoid'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'~&gt; 6.0'</span></span>
gem <span class="token string-literal"><span class="token string">'bson_ext'</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now do <em>bundle install</em>. Now we have to generate <em>mongoid.yml</em> file which is similar to <em>database.yml</em> file for us.</p> <p>Run the following command to generate MongoDB configuration files.</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>rails g mongoid<span class="token symbol">:config</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Now update <em>mongoid.yml</em>  file based on your MongoDB configurations and create a database with <em>rake db:create</em></p></li></ul> <p><strong>Creating Database</strong></p> <p>Once the configuration is set you can create database with following commands</p> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>bin<span class="token operator">/</span>rails db<span class="token symbol">:create</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/database/" class="prev router-link-active">
        Database
      </a></span> <span class="next"><a href="/database/Active Record ORM.html">
        Active Record ORM
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7adc5413.js" defer></script><script src="/assets/js/2.72a95a92.js" defer></script><script src="/assets/js/13.2df3af10.js" defer></script>
  </body>
</html>
